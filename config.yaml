# Status Monitor - Enterprise Configuration
# Better than Cloudflare, GitHub, and Google Cloud status pages

title: "System Status"
description: "Real-time system status and uptime monitoring"
base_url: "http://localhost:8080"

# Optional branding
# logo: "https://example.com/logo.svg"
# favicon: "https://example.com/favicon.ico"

# Theme customization
theme:
  primary_color: "#3B82F6"
  accent_color: "#10B981"
  dark_mode: true

# Server configuration
server:
  port: 8080
  read_timeout: 15s
  write_timeout: 15s

# Data storage
storage:
  data_dir: "data"

# API configuration - supports multiple auth methods
api:
  enabled: true
  # Option 1: API Key (X-API-Key header or ?api_key= query param)
  key: "your-secret-api-key-here"

  # Option 2: Bearer token (Authorization: Bearer <token>)
  # bearer_token: "your-bearer-token-here"

  # Option 3: Basic Auth
  # basic_auth:
  #   enabled: true
  #   username: "admin"
  #   password: "secure-password"

  # Option 4: IP Whitelist (allows requests from these IPs without auth)
  # allowed_ips:
  #   - "127.0.0.1"
  #   - "10.0.0.0/8"

  rate_limit: 100

# Webhook notifications - supports Slack, Discord, MS Teams, PagerDuty, Opsgenie, generic
webhooks:
  # Slack
  # - id: "slack-alerts"
  #   name: "Slack Alerts"
  #   url: "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
  #   type: "slack"
  #   events: ["incident.created", "incident.resolved"]
  #   enabled: true

  # Discord
  # - id: "discord-alerts"
  #   name: "Discord Alerts"
  #   url: "https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK"
  #   type: "discord"
  #   events: ["*"]  # All events
  #   enabled: true

  # Microsoft Teams
  # - id: "teams-alerts"
  #   name: "MS Teams Alerts"
  #   url: "https://outlook.office.com/webhook/YOUR/TEAMS/WEBHOOK"
  #   type: "teams"  # or "msteams"
  #   events: ["incident.created", "incident.updated", "incident.resolved"]
  #   enabled: true

  # PagerDuty (Events API v2)
  # - id: "pagerduty-alerts"
  #   name: "PagerDuty"
  #   url: "https://events.pagerduty.com/v2/enqueue"
  #   type: "pagerduty"
  #   headers:
  #     routing_key: "YOUR_PAGERDUTY_INTEGRATION_KEY"
  #   events: ["incident.created", "incident.resolved"]
  #   enabled: true

  # Opsgenie
  # - id: "opsgenie-alerts"
  #   name: "Opsgenie"
  #   url: "https://api.opsgenie.com/v2/alerts"
  #   type: "opsgenie"
  #   headers:
  #     Authorization: "GenieKey YOUR_OPSGENIE_API_KEY"
  #   events: ["incident.created"]
  #   enabled: true

  # Generic webhook (any HTTP endpoint)
  # - id: "generic-webhook"
  #   name: "Custom Webhook"
  #   url: "https://your-server.com/webhook"
  #   type: "generic"
  #   headers:
  #     Authorization: "Bearer your-token"
  #   events: ["incident.created", "incident.updated", "incident.resolved", "maintenance.scheduled"]
  #   enabled: true

# Services to monitor
services:
  # ============================================
  # HTTP/HTTPS Checks
  # ============================================
  - name: "API Server"
    type: http
    group: "Core Services"
    url: "https://api.github.com"
    method: GET
    interval: 30s
    timeout: 10s
    expected_status: 200
    description: "Main API endpoint"

  - name: "Website"
    type: http
    group: "Core Services"
    url: "https://github.com"
    method: GET
    interval: 30s
    timeout: 10s
    expected_status: 200
    description: "Public website"

  # ============================================
  # TCP Port Checks
  # ============================================
  - name: "Database"
    type: tcp
    group: "Infrastructure"
    host: "github.com"
    port: 443
    interval: 30s
    timeout: 5s
    description: "Primary database"

  # ============================================
  # DNS Checks
  # ============================================
  - name: "DNS Resolution"
    type: dns
    group: "Infrastructure"
    host: "github.com"
    dns_record_type: A
    dns_resolver: "8.8.8.8:53"
    interval: 60s
    timeout: 5s
    description: "DNS A record lookup"

  # ============================================
  # ICMP Ping Checks
  # ============================================
  - name: "Network Gateway"
    type: icmp
    group: "Network"
    host: "8.8.8.8"
    interval: 30s
    timeout: 5s
    description: "Network connectivity"

  # ============================================
  # External Services
  # ============================================
  - name: "CDN"
    type: http
    group: "External"
    url: "https://cdn.jsdelivr.net"
    method: GET
    interval: 60s
    timeout: 10s
    expected_status: 200
    description: "Content delivery"

  - name: "Google APIs"
    type: http
    group: "External"
    url: "https://www.googleapis.com"
    method: GET
    interval: 60s
    timeout: 10s
    expected_status: 404  # Returns 404 for root
    description: "Google API services"

# Initial incidents (optional)
# incidents:
#   - id: "inc-001"
#     title: "API Latency Issues"
#     description: "Investigating slow API responses"
#     status: "investigating"
#     severity: "minor"
#     affected_services: ["API Server"]
